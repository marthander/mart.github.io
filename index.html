


<!DOCTYPE html>
<html>
<head>
  <title>MetaMask Connect</title>

  <style>
  
  
 
html {
  background: rgb(32,32,32);
}  

  
  
  .none{
  
  display: none;
  
  }
  
  
  

  
  
  
  
  
  </style>
</head>
<body>
  
  
  <div id="hi">hi</div>
  <button id="connect">Connect MetaMask</button>
  <a href="https://twitter.com">twitter</a>
  

  
  
 
  <script>
    

const connectWalletButton = document.getElementById("connect");

connectWalletButton.addEventListener("click", () => {
  // Check if MetaMask is installed
  if (typeof window.ethereum !== "undefined") {
    // Connect to MetaMask
    window.ethereum.request({
      method: "eth_requestAccounts",
    }).then((accounts) => {
      // Get the user's first account
      const account = accounts[0];

      // Do something with the user's account
      console.log("The user's account address is: ", account);
	  
	  
    

  
 
  // Remove the div when the user's account is in the console
      const connectdiv = document.getElementById("connect");
      if (connectdiv) {
        connectdiv.classList.add("none")
	  
	      }
 
 
 
const connectedDiv = document.createElement("div");
connectedDiv.id = "connected";
connectedDiv.textContent = account;
 var existingDiv = document.getElementById("hi");
    var parentDiv = existingDiv.parentNode;
    parentDiv.insertBefore(connectedDiv, existingDiv);

window.addEventListener("MetaMaskConnected", async () => {
  if (!connectedDiv) {
    connectedDiv = document.createElement("div");
    connectedDiv.id = "connected";
    connectedDiv.textContent = account;
    var existingDiv = document.getElementById("hi");
    var parentDiv = existingDiv.parentNode;
    parentDiv.insertBefore(connectedDiv, existingDiv);
   
  }
});

 
    });
    





window.ethereum.on('accountsChanged', (accounts) => {
    // If user has locked/logout from MetaMask, this resets the accounts array to empty
    if (!accounts.length) {
      console.log("The user not connected ");
        // Remove the div when the user's account is in the console
      const connecteddiv = document.getElementById("connected");
      if (connecteddiv) {
        connecteddiv.remove();
	  
	      }
          
          
        // Remove the div when the user's account is in the console
      const connectdiv = document.getElementById("connect");
      if (connectdiv) {
        connectdiv.classList.remove("none")
	  
	      }    
          
          
          
          
          
    }
});





   window.onload = (event) => {
        isConnected();
     };
            
      async function isConnected() {
         const accounts = await ethereum.request({method: 'eth_accounts'});       
         if (accounts.length) {
            console.log(`You're connected to: ${accounts[0]}`);
         } else {
            console.log("Metamask is not connected");
         }
      }
    
    
    
  } else {
    // Prompt the user to install MetaMask
    window.location.href = "https://metamask.io/";
    
    
    
  }
});


  </script>
</body>
</html>



